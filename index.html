<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PCOS Quiz â€“ Nourished Natural Health</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500&family=Fraunces:opsz,wght@9..144,500&display=swap" rel="stylesheet" />

  <!-- Klaviyo Web Tracking Snippet -->
  <script>
    (function(){
      var _learnq = window._learnq = window._learnq || [];
      if (!_learnq.init) {
        _learnq.methods = ["identify","track","trackForm","page","subscribe"];
        _learnq.factory = function(method){
          return function(){ _learnq.push([method].concat(Array.prototype.slice.call(arguments,0))); };
        };
        for (var i=0;i<_learnq.methods.length;i++){ var m=_learnq.methods[i]; _learnq[m]=_learnq.factory(m); }
        _learnq.load = function(apiKey){
          var s=document.createElement("script"); s.async=true; s.src="https://static.klaviyo.com/onsite/js/klaviyo.js?company_id="+apiKey;
          document.head.appendChild(s);
        };
        _learnq.load("S4cYEr");
        _learnq.init=true;
      }
    })();
  </script>

  <style>
    :root {
      --color-yes: #E51550;
      --color-secondary: #06604A;
      --color-text: #1e1b1c;
      --spacing: 1rem;
      --font-heading: 'Fraunces', serif;
      --font-body: 'DM Sans', sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; }
    body { margin:0; font-family:var(--font-body); color:var(--color-text); line-height:1.5; }
    .quiz-container { max-width:480px; margin:0 auto; padding:calc(var(--spacing)*2); }
    .progress-container { width:100%; background:var(--color-text); opacity:0.1; border-radius:4px; overflow:hidden; height:8px; margin-bottom:var(--spacing); }
    .progress-bar { width:0%; height:100%; background:var(--color-yes); transition:width .3s ease; }
    .screen { display:none; }
    .screen.active { display:block; }
    h1 { font-family:var(--font-heading); font-size:2rem; margin-bottom:var(--spacing); }
    h2 { font-family:var(--font-heading); font-size:1.25rem; margin-bottom:calc(var(--spacing)*0.5); }
    p { margin-bottom:var(--spacing); }
    .btn { display:block; width:100%; padding:var(--spacing); margin:calc(var(--spacing)*0.5) 0; font-size:1rem; border:none; border-radius:8px; background:var(--color-yes); color:#fff; cursor:pointer; font-family:var(--font-body); }
    .btn-secondary { background:var(--color-secondary); color:#fff; font-family:var(--font-body); margin-bottom:0; }
    .btn-not-sure { background:#A93923; color:#fff; font-family:var(--font-body); margin:calc(var(--spacing)*0.25) 0 var(--spacing); }
    label, input { display:block; width:100%; margin-bottom:var(--spacing); font-size:1rem; color:var(--color-text); }
    input { padding:calc(var(--spacing)*0.5); border:1px solid #ccc; border-radius:4px; }
    #screen-result .btn { width:auto; margin:var(--spacing) auto; display:block; }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>

    <!-- Cover -->
    <div class="screen active" id="screen-cover">
      <h1>Get Your Personalized Vitamin Protocol</h1>
      <p>Discover which vitamins are right for your unique PCOS type and get a free report on all the lifestyle changes you can make to get rid of your symptoms forever.</p>
      <img src="https://lq3-production01.s3-accelerate.amazonaws.com/lead_quizzes_3.0/cover_page/0003/93/8d42d39e57b245d87302f661b5ee17c60af511dd.jpeg" alt="Quiz Cover" loading="lazy" style="width:100%; border-radius:12px; margin-bottom:var(--spacing)" />
      <button type="button" class="btn" id="btn-start">Get My Personalized Plan</button>
    </div>

    <!-- Sample Questions (add all 23 similarly) -->
    <div class="screen" data-step="1">
      <h2>I have been diagnosed with insulin resistance, pre-diabetes, diabetes or have suspected insulin resistance</h2>
      <button type="button" class="btn" data-type="insulin">Yes</button>
      <button type="button" class="btn btn-secondary" data-type="">No</button>
      <button type="button" class="btn btn-not-sure" data-type="">Not Sure</button>
    </div>
    <!-- ... up to data-step="23" ... -->

    <!-- Email -->
    <div class="screen" id="screen-email">
      <h2>Almost done!</h2>
      <p>Add your best contact email and we'll send the results straight to your inbox.</p>
      <label for="email">Email address</label>
      <input type="email" id="email" placeholder="you@example.com" required />
      <button type="button" class="btn" id="btn-submit-email">Get My Personalized Plan</button>
      <p id="email-error" style="color:var(--color-secondary); display:none;">Please enter a valid email.</p>
    </div>

    <!-- Result -->
    <div class="screen" id="screen-result">
      <h2>Your result is ready!</h2>
      <a href="#" class="btn" id="result-link">View My Results</a>
    </div>
  </div>

  <script defer>
    const questionScreens = document.querySelectorAll('[data-step]');
    const totalQuestions = questionScreens.length;
    let scores = {}, override = false, stepIndex = 0;
    const screens = document.querySelectorAll('.screen');
    const progressBar = document.getElementById('progress-bar');
    const redirectMap = {
      insulin:      'https://nourishednaturalhealth.com/pages/insulin-resistant-quiz-result-v1',
      inflammatory: 'https://nourishednaturalhealth.com/pages/inflammatory-quiz-result',
      adrenal:      'https://nourishednaturalhealth.com/pages/adrenal-quiz-result',
      postpill:     'https://nourishednaturalhealth.com/pages/post-pill-quiz-result'
    };
    const resultLabels = {
      insulin:      'Insulin Resistant PCOS',
      inflammatory: 'Inflammatory PCOS',
      adrenal:      'Adrenal PCOS',
      postpill:     'Post-Pill PCOS'
    };
    const KLAV_LIST_ID = 'URJwDU';

    function updateProgress() {
      progressBar.style.width = ((stepIndex / totalQuestions) * 100) + '%';
    }
    function showScreen(idx) {
      screens.forEach(s => s.classList.remove('active'));
      screens[idx].classList.add('active');
      updateProgress();
    }
    function nextStep(type) {
      if (type === 'postpill') override = true;
      else if (type) scores[type] = (scores[type] || 0) + 1;
      stepIndex++;
      if (stepIndex <= totalQuestions) showScreen(stepIndex);
      else showScreen(totalQuestions + 1);
    }

    document.getElementById('btn-start').addEventListener('click', () => {
      stepIndex = 1; showScreen(1);
    });

    questionScreens.forEach(scr => {
      scr.querySelectorAll('.btn, .btn-secondary, .btn-not-sure').forEach(btn => {
        btn.addEventListener('click', () => nextStep(btn.dataset.type));
      });
    });

    document.getElementById('btn-submit-email').addEventListener('click', () => {
      const email = document.getElementById('email').value.trim();
      const err = document.getElementById('email-error');
      if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)) { err.style.display = 'block'; return; }
      err.style.display = 'none';
      const key = override ? 'postpill' : Object.entries(scores).sort((a,b)=>b[1]-a[1])[0]?.[0] || 'insulin';
      const label = resultLabels[key];
      window._learnq.push(['identify',{ email, source_content_result: label }]);
      window._learnq.push(['subscribe',{ listId: KLAV_LIST_ID, email }]);
      document.getElementById('result-link').href = redirectMap[key];
      showScreen(totalQuestions + 2);
    });
  </script>
</body>
</html>
